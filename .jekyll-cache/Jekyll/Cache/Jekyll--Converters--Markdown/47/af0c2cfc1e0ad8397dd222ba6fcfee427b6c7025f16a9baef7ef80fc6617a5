I"¾-<p>YAML æ˜¯ä¸“é—¨ç”¨æ¥å†™é…ç½®æ–‡ä»¶çš„è¯­è¨€ï¼Œéå¸¸ç®€æ´å’Œå¼ºå¤§ï¼Œè¿œæ¯” JSON æ ¼å¼æ–¹ä¾¿ã€‚ æœ¬æ–‡è½¬è‡ª<a href="http://www.ruanyifeng.com/blog/">é˜®ä¸€å³°çš„ç½‘ç»œæ—¥å¿—</a> - <a href="http://www.ruanyifeng.com/blog/2016/07/yaml.html">YAML è¯­è¨€æ•™ç¨‹</a>ã€‚</p>

<h2 id="ä¸€ç®€ä»‹">ä¸€ã€ç®€ä»‹</h2>

<p>YAML è¯­è¨€ï¼ˆå‘éŸ³ /ËˆjÃ¦mÉ™l/ ï¼‰çš„è®¾è®¡ç›®æ ‡ï¼Œå°±æ˜¯æ–¹ä¾¿äººç±»è¯»å†™ã€‚å®ƒå®è´¨ä¸Šæ˜¯ä¸€ç§é€šç”¨çš„æ•°æ®ä¸²è¡ŒåŒ–æ ¼å¼ã€‚</p>

<p>å®ƒçš„åŸºæœ¬è¯­æ³•è§„åˆ™å¦‚ä¸‹ã€‚</p>

<ul>
  <li>
    <p>å¤§å°å†™æ•æ„Ÿ</p>
  </li>
  <li>
    <p>ä½¿ç”¨ç¼©è¿›è¡¨ç¤ºå±‚çº§å…³ç³»</p>
  </li>
  <li>
    <p>ç¼©è¿›æ—¶ä¸å…è®¸ä½¿ç”¨Tabé”®ï¼Œåªå…è®¸ä½¿ç”¨ç©ºæ ¼ã€‚</p>
  </li>
  <li>
    <p>ç¼©è¿›çš„ç©ºæ ¼æ•°ç›®ä¸é‡è¦ï¼Œåªè¦ç›¸åŒå±‚çº§çš„å…ƒç´ å·¦ä¾§å¯¹é½å³å¯</p>
  </li>
</ul>

<p>~~~</p>

<p><strong><code>#</code> è¡¨ç¤ºæ³¨é‡Šï¼Œä»è¿™ä¸ªå­—ç¬¦ä¸€ç›´åˆ°è¡Œå°¾ï¼Œéƒ½ä¼šè¢«è§£æå™¨å¿½ç•¥ã€‚</strong></p>

<p>YAML æ”¯æŒçš„æ•°æ®ç»“æ„æœ‰ä»¥ä¸‹ä¸‰ç§ï¼š</p>

<ul>
  <li>å¯¹è±¡ï¼šé”®å€¼å¯¹çš„é›†åˆï¼Œåˆç§°ä¸ºæ˜ å°„ï¼ˆmappingï¼‰/ å“ˆå¸Œï¼ˆhashesï¼‰ / å­—å…¸ï¼ˆdictionaryï¼‰</li>
  <li>æ•°ç»„ï¼šä¸€ç»„æŒ‰æ¬¡åºæ’åˆ—çš„å€¼ï¼Œåˆç§°ä¸ºåºåˆ—ï¼ˆsequenceï¼‰ / åˆ—è¡¨ï¼ˆlistï¼‰</li>
  <li>çº¯é‡ï¼ˆscalarsï¼‰ï¼šå•ä¸ªçš„ã€ä¸å¯å†åˆ†çš„å€¼</li>
</ul>

<p>ä»¥ä¸‹åˆ†åˆ«ä»‹ç»è¿™ä¸‰ç§æ•°æ®ç»“æ„ã€‚</p>

<h2 id="äºŒå¯¹è±¡">äºŒã€å¯¹è±¡</h2>

<p><strong>å¯¹è±¡çš„ä¸€ç»„é”®å€¼å¯¹ï¼Œä½¿ç”¨å†’å·ç»“æ„è¡¨ç¤ºã€‚</strong></p>

<blockquote>
  <pre><code class="language-javascript">animal: pets
</code></pre>
</blockquote>

<p>è½¬ä¸º JavaScript å¦‚ä¸‹ã€‚</p>

<blockquote>
  <pre><code class="language-javascript">{ animal: 'pets' }
</code></pre>
</blockquote>

<p>Yaml ä¹Ÿå…è®¸å¦ä¸€ç§å†™æ³•ï¼Œå°†æ‰€æœ‰é”®å€¼å¯¹å†™æˆä¸€ä¸ªè¡Œå†…å¯¹è±¡ã€‚</p>

<blockquote>
  <pre><code class="language-javascript">hash: { name: Steve, foo: bar } 
</code></pre>
</blockquote>

<p>è½¬ä¸º JavaScript å¦‚ä¸‹ã€‚</p>

<blockquote>
  <pre><code class="language-javascript">{ hash: { name: 'Steve', foo: 'bar' } }
</code></pre>
</blockquote>

<h2 id="ä¸‰æ•°ç»„">ä¸‰ã€æ•°ç»„</h2>

<p>ä¸€ç»„<strong>è¿è¯çº¿å¼€å¤´</strong>çš„è¡Œï¼Œæ„æˆä¸€ä¸ªæ•°ç»„ã€‚</p>

<blockquote>
  <pre><code class="language-javascript">- Cat
- Dog
- Goldfish
</code></pre>
</blockquote>

<p>è½¬ä¸º JavaScript å¦‚ä¸‹ã€‚</p>

<blockquote>
  <pre><code class="language-javascript">[ 'Cat', 'Dog', 'Goldfish' ]
</code></pre>
</blockquote>

<p>æ•°æ®ç»“æ„çš„å­æˆå‘˜æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œåˆ™å¯ä»¥<strong>åœ¨è¯¥é¡¹ä¸‹é¢ç¼©è¿›ä¸€ä¸ªç©ºæ ¼ã€‚</strong></p>

<blockquote>
  <pre><code class="language-javascript">-
 - Cat
 - Dog
 - Goldfish
</code></pre>
</blockquote>

<p>è½¬ä¸º JavaScript å¦‚ä¸‹ã€‚</p>

<blockquote>
  <pre><code class="language-javascript">[ [ 'Cat', 'Dog', 'Goldfish' ] ]
</code></pre>
</blockquote>

<p>æ•°ç»„ä¹Ÿå¯ä»¥é‡‡ç”¨è¡Œå†…è¡¨ç¤ºæ³•ã€‚</p>

<blockquote>
  <pre><code class="language-javascript">animal: [Cat, Dog]
</code></pre>
</blockquote>

<p>è½¬ä¸º JavaScript å¦‚ä¸‹ã€‚</p>

<blockquote>
  <pre><code class="language-javascript">{ animal: [ 'Cat', 'Dog' ] }
</code></pre>
</blockquote>

<h2 id="å››å¤åˆç»“æ„">å››ã€å¤åˆç»“æ„</h2>

<p>å¯¹è±¡å’Œæ•°ç»„å¯ä»¥ç»“åˆä½¿ç”¨ï¼Œå½¢æˆå¤åˆç»“æ„ã€‚</p>

<blockquote>
  <pre><code class="language-javascript">languages:
 - Ruby
 - Perl
 - Python 
websites:
 YAML: yaml.org 
 Ruby: ruby-lang.org 
 Python: python.org 
 Perl: use.perl.org 
</code></pre>
</blockquote>

<p>è½¬ä¸º JavaScript å¦‚ä¸‹ã€‚</p>

<blockquote>
  <pre><code class="language-javascript">{ languages: [ 'Ruby', 'Perl', 'Python' ],
  websites: 
   { YAML: 'yaml.org',
     Ruby: 'ruby-lang.org',
     Python: 'python.org',
     Perl: 'use.perl.org' } }
</code></pre>
</blockquote>

<h2 id="äº”çº¯é‡">äº”ã€çº¯é‡</h2>

<p>çº¯é‡æ˜¯æœ€åŸºæœ¬çš„ã€ä¸å¯å†åˆ†çš„å€¼ã€‚ä»¥ä¸‹æ•°æ®ç±»å‹éƒ½å±äº JavaScript çš„çº¯é‡ã€‚</p>

<blockquote>
  <ul>
    <li>å­—ç¬¦ä¸²</li>
    <li>å¸ƒå°”å€¼</li>
    <li>æ•´æ•°</li>
    <li>æµ®ç‚¹æ•°</li>
    <li>Null</li>
    <li>æ—¶é—´</li>
    <li>æ—¥æœŸ</li>
  </ul>
</blockquote>

<p>æ•°å€¼ç›´æ¥ä»¥å­—é¢é‡çš„å½¢å¼è¡¨ç¤ºã€‚</p>

<blockquote>
  <pre><code class="language-javascript">number: 12.30
</code></pre>
</blockquote>

<p>è½¬ä¸º JavaScript å¦‚ä¸‹ã€‚</p>

<blockquote>
  <pre><code class="language-javascript">{ number: 12.30 }
</code></pre>
</blockquote>

<p>å¸ƒå°”å€¼ç”¨<code>true</code>å’Œ<code>false</code>è¡¨ç¤ºã€‚</p>

<blockquote>
  <pre><code class="language-javascript">isSet: true
</code></pre>
</blockquote>

<p>è½¬ä¸º JavaScript å¦‚ä¸‹ã€‚</p>

<blockquote>
  <pre><code class="language-javascript">{ isSet: true }
</code></pre>
</blockquote>

<p><code>null</code>ç”¨<code>~</code>è¡¨ç¤ºã€‚</p>

<blockquote>
  <pre><code class="language-javascript">parent: ~ 
</code></pre>
</blockquote>

<p>è½¬ä¸º JavaScript å¦‚ä¸‹ã€‚</p>

<blockquote>
  <pre><code class="language-javascript">{ parent: null }
</code></pre>
</blockquote>

<p>æ—¶é—´é‡‡ç”¨ ISO8601 æ ¼å¼ã€‚</p>

<blockquote>
  <pre><code class="language-javascript">iso8601: 2001-12-14t21:59:43.10-05:00 
</code></pre>
</blockquote>

<p>è½¬ä¸º JavaScript å¦‚ä¸‹ã€‚</p>

<blockquote>
  <pre><code class="language-javascript">{ iso8601: new Date('2001-12-14t21:59:43.10-05:00') }
</code></pre>
</blockquote>

<p>æ—¥æœŸé‡‡ç”¨å¤åˆ iso8601 æ ¼å¼çš„å¹´ã€æœˆã€æ—¥è¡¨ç¤ºã€‚</p>

<blockquote>
  <pre><code class="language-javascript">date: 1976-07-31
</code></pre>
</blockquote>

<p>è½¬ä¸º JavaScript å¦‚ä¸‹ã€‚</p>

<blockquote>
  <pre><code class="language-javascript">{ date: new Date('1976-07-31') }
</code></pre>
</blockquote>

<p>YAML å…è®¸<strong>ä½¿ç”¨ä¸¤ä¸ªæ„Ÿå¹å·ï¼Œå¼ºåˆ¶è½¬æ¢æ•°æ®ç±»å‹</strong>ã€‚</p>

<blockquote>
  <pre><code class="language-javascript">e: !!str 123
f: !!str true
</code></pre>
</blockquote>

<p>è½¬ä¸º JavaScript å¦‚ä¸‹ã€‚</p>

<blockquote>
  <pre><code class="language-javascript">{ e: '123', f: 'true' }
</code></pre>
</blockquote>

<h2 id="å…­å­—ç¬¦ä¸²">å…­ã€å­—ç¬¦ä¸²</h2>

<p>å­—ç¬¦ä¸²æ˜¯æœ€å¸¸è§ï¼Œä¹Ÿæ˜¯æœ€å¤æ‚çš„ä¸€ç§æ•°æ®ç±»å‹ã€‚</p>

<p>å­—ç¬¦ä¸²<strong>é»˜è®¤ä¸ä½¿ç”¨å¼•å·</strong>è¡¨ç¤ºã€‚</p>

<blockquote>
  <pre><code class="language-javascript">str: è¿™æ˜¯ä¸€è¡Œå­—ç¬¦ä¸²
</code></pre>
</blockquote>

<p>è½¬ä¸º JavaScript å¦‚ä¸‹ã€‚</p>

<blockquote>
  <pre><code class="language-javascript">{ str: 'è¿™æ˜¯ä¸€è¡Œå­—ç¬¦ä¸²' }
</code></pre>
</blockquote>

<p><strong>å¦‚æœå­—ç¬¦ä¸²ä¹‹ä¸­åŒ…å«ç©ºæ ¼æˆ–ç‰¹æ®Šå­—ç¬¦</strong>ï¼Œéœ€è¦æ”¾åœ¨å¼•å·ä¹‹ä¸­ã€‚</p>

<blockquote>
  <pre><code class="language-javascript">str: 'å†…å®¹ï¼š å­—ç¬¦ä¸²'
</code></pre>
</blockquote>

<p>è½¬ä¸º JavaScript å¦‚ä¸‹ã€‚</p>

<blockquote>
  <pre><code class="language-javascript">{ str: 'å†…å®¹: å­—ç¬¦ä¸²' }
</code></pre>
</blockquote>

<p>å•å¼•å·å’ŒåŒå¼•å·éƒ½å¯ä»¥ä½¿ç”¨ï¼ŒåŒå¼•å·ä¸ä¼šå¯¹ç‰¹æ®Šå­—ç¬¦è½¬ä¹‰ã€‚</p>

<blockquote>
  <pre><code class="language-javascript">s1: 'å†…å®¹\nå­—ç¬¦ä¸²'
s2: "å†…å®¹\nå­—ç¬¦ä¸²"
</code></pre>
</blockquote>

<p>è½¬ä¸º JavaScript å¦‚ä¸‹ã€‚</p>

<blockquote>
  <pre><code class="language-javascript">{ s1: 'å†…å®¹\\nå­—ç¬¦ä¸²', s2: 'å†…å®¹\nå­—ç¬¦ä¸²' }
</code></pre>
</blockquote>

<p>å•å¼•å·ä¹‹ä¸­å¦‚æœè¿˜æœ‰å•å¼•å·ï¼Œå¿…é¡»è¿ç»­ä½¿ç”¨ä¸¤ä¸ª<strong>å•å¼•å·è½¬ä¹‰</strong>ã€‚</p>

<blockquote>
  <pre><code class="language-javascript">str: 'labor''s day' 
</code></pre>
</blockquote>

<p>è½¬ä¸º JavaScript å¦‚ä¸‹ã€‚</p>

<blockquote>
  <pre><code class="language-javascript">{ str: 'labor\'s day' }
</code></pre>
</blockquote>

<p>å­—ç¬¦ä¸²å¯ä»¥å†™æˆå¤šè¡Œï¼Œä»ç¬¬äºŒè¡Œå¼€å§‹ï¼Œå¿…é¡»æœ‰ä¸€ä¸ªå•ç©ºæ ¼ç¼©è¿›ã€‚æ¢è¡Œç¬¦ä¼šè¢«è½¬ä¸ºç©ºæ ¼ã€‚</p>

<blockquote>
  <pre><code class="language-javascript">str: è¿™æ˜¯ä¸€æ®µ
  å¤šè¡Œ
  å­—ç¬¦ä¸²
</code></pre>
</blockquote>

<p>è½¬ä¸º JavaScript å¦‚ä¸‹ã€‚</p>

<blockquote>
  <pre><code class="language-javascript">{ str: 'è¿™æ˜¯ä¸€æ®µ å¤šè¡Œ å­—ç¬¦ä¸²' }
</code></pre>
</blockquote>

<p>å¤šè¡Œå­—ç¬¦ä¸²å¯ä»¥<strong>ä½¿ç”¨<code>|</code>ä¿ç•™æ¢è¡Œç¬¦ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨<code>&gt;</code>æŠ˜å æ¢è¡Œ</strong>ã€‚</p>

<blockquote>
  <pre><code class="language-javascript">this: |
  Foo
  Bar
that: &gt;
  Foo
  Bar
</code></pre>
</blockquote>

<p>è½¬ä¸º JavaScript ä»£ç å¦‚ä¸‹ã€‚</p>

<blockquote>
  <pre><code class="language-javascript">{ this: 'Foo\nBar\n', that: 'Foo Bar\n' }
</code></pre>
</blockquote>

<p><strong><code>+</code>è¡¨ç¤ºä¿ç•™æ–‡å­—å—æœ«å°¾çš„æ¢è¡Œï¼Œ<code>-</code>è¡¨ç¤ºåˆ é™¤å­—ç¬¦ä¸²æœ«å°¾çš„æ¢è¡Œã€‚</strong></p>

<blockquote>
  <pre><code class="language-javascript">s1: |
  Foo

s2: |+
  Foo


s3: |-
  Foo
</code></pre>
</blockquote>

<p>è½¬ä¸º JavaScript ä»£ç å¦‚ä¸‹ã€‚</p>

<blockquote>
  <pre><code class="language-javascript">{ s1: 'Foo\n', s2: 'Foo\n\n\n', s3: 'Foo' }
</code></pre>
</blockquote>

<p>å­—ç¬¦ä¸²ä¹‹ä¸­å¯ä»¥æ’å…¥ HTML æ ‡è®°ã€‚</p>

<blockquote>
  <pre><code class="language-javascript">message: |

  &lt;p style="color: red"&gt;
    æ®µè½
  &lt;/p&gt;
</code></pre>
</blockquote>

<p>è½¬ä¸º JavaScript å¦‚ä¸‹ã€‚</p>

<blockquote>
  <pre><code class="language-javascript">{ message: '\n&lt;p style="color: red"&gt;\n  æ®µè½\n&lt;/p&gt;\n' }
</code></pre>
</blockquote>

<h2 id="ä¸ƒå¼•ç”¨">ä¸ƒã€å¼•ç”¨</h2>

<p>é”šç‚¹<code>&amp;</code>å’Œåˆ«å<code>*</code>ï¼Œå¯ä»¥ç”¨æ¥å¼•ç”¨ã€‚</p>

<blockquote>
  <pre><code class="language-javascript">defaults: &amp;defaults
  adapter:  postgres
  host:     localhost

development:
  database: myapp_development
  &lt;&lt;: *defaults

test:
  database: myapp_test
  &lt;&lt;: *defaults
</code></pre>
</blockquote>

<p>ç­‰åŒäºä¸‹é¢çš„ä»£ç ã€‚</p>

<blockquote>
  <pre><code class="language-javascript">defaults:
  adapter:  postgres
  host:     localhost

development:
  database: myapp_development
  adapter:  postgres
  host:     localhost

test:
  database: myapp_test
  adapter:  postgres
  host:     localhost
</code></pre>
</blockquote>

<p><strong><code>&amp;</code>ç”¨æ¥å»ºç«‹é”šç‚¹ï¼ˆ<code>defaults</code>ï¼‰ï¼Œ<code>&lt;&lt;</code>è¡¨ç¤ºåˆå¹¶åˆ°å½“å‰æ•°æ®ï¼Œ<code>*</code>ç”¨æ¥å¼•ç”¨é”šç‚¹ã€‚</strong></p>

<p>ä¸‹é¢æ˜¯å¦ä¸€ä¸ªä¾‹å­ã€‚</p>

<blockquote>
  <pre><code class="language-javascript">- &amp;showell Steve 
- Clark 
- Brian 
- Oren 
- *showell 
</code></pre>
</blockquote>

<p>è½¬ä¸º JavaScript ä»£ç å¦‚ä¸‹ã€‚</p>

<blockquote>
  <pre><code class="language-javascript">[ 'Steve', 'Clark', 'Brian', 'Oren', 'Steve' ]
</code></pre>
</blockquote>

<h2 id="å…«å‡½æ•°å’Œæ­£åˆ™è¡¨è¾¾å¼çš„è½¬æ¢">å…«ã€å‡½æ•°å’Œæ­£åˆ™è¡¨è¾¾å¼çš„è½¬æ¢</h2>

<p>è¿™æ˜¯ <a href="https://github.com/nodeca/js-yaml">JS-YAML</a> åº“ç‰¹æœ‰çš„åŠŸèƒ½ï¼Œå¯ä»¥æŠŠå‡½æ•°å’Œæ­£åˆ™è¡¨è¾¾å¼è½¬ä¸ºå­—ç¬¦ä¸²ã€‚</p>

<blockquote>
  <pre><code class="language-javascript"># example.yml
fn: function () { return 1 }
reg: /test/
</code></pre>
</blockquote>

<p>è§£æä¸Šé¢çš„ yml æ–‡ä»¶çš„ä»£ç å¦‚ä¸‹ã€‚</p>

<blockquote>
  <pre><code class="language-javascript">var yaml = require('js-yaml');
var fs   = require('fs');

try {
  var doc = yaml.load(
    fs.readFileSync('./example.yml', 'utf8')
  );
  console.log(doc);
} catch (e) {
  console.log(e);
}
</code></pre>
</blockquote>

<p>ä» JavaScript å¯¹è±¡è¿˜åŸåˆ° yaml æ–‡ä»¶çš„ä»£ç å¦‚ä¸‹ã€‚</p>

<blockquote>
  <pre><code class="language-javascript">var yaml = require('js-yaml');
var fs   = require('fs');

var obj = {
  fn: function () { return 1 },
  reg: /test/
};

try {
  fs.writeFileSync(
    './example.yml',
    yaml.dump(obj),
    'utf8'
  );
} catch (e) {
  console.log(e);
}
</code></pre>
</blockquote>

<h2 id="ä¹å‚è€ƒé“¾æ¥">ä¹ã€å‚è€ƒé“¾æ¥</h2>

<ul>
  <li><a href="http://www.yaml.org/spec/1.2/spec.html">YAML 1.2 è§„æ ¼</a></li>
  <li><a href="https://en.wikipedia.org/wiki/YAML">YAML from Wikipedia</a></li>
  <li><a href="http://yaml.org/YAML_for_ruby.html">YAML for Ruby</a></li>
</ul>
:ET